apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: quay-bridge-operator-netpol
  namespace: system
spec:
  podSelector:
    matchLabels:
      name: quay-bridge-operator
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # Allow health probes and webhooks from any namespace (kubelet, API server, etc.)
  - ports:
    - protocol: TCP
      port: 8081  # Health/readiness probes
    - protocol: TCP
      port: 9443  # Webhook service
  # Allow metrics scraping from any namespace (Prometheus, etc.)
  - ports:
    - protocol: TCP
      port: 8443  # Metrics service
  egress:
  # Allow all egress to any destination (simplified for operator functionality)
  - {}
